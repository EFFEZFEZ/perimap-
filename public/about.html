<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ã€ propos Â· PÃ©riMap</title>
    <meta name="description" content="Pourquoi PÃ©riMap existe, comment les donnÃ©es PÃ©ribus sont utilisÃ©es et comment installer l'app sur votre Ã©cran d'accueil.">
    <meta name="robots" content="index,follow">
    <link rel="canonical" href="https://perimap.app/about">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/webp" sizes="192x192" href="https://i.ibb.co/1f0pp0Tc/Peribus-Icon.webp">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="about-page">
    <header id="main-header" class="about-header">
        <div class="header-content about-header-content">
            <div class="logo header-left">
                <img src="https://i.ibb.co/0jJhLPp8/Peribus.webp" alt="Logo PÃ©ribus" class="header-logo-img">
                <div class="header-title-group">
                    <span class="brand-name">PÃ©riMap</span>
                    <span class="brand-sub">Planificateur indÃ©pendant du rÃ©seau PÃ©ribus</span>
                </div>
            </div>
            <nav class="header-nav about-header-actions">
                <a class="header-link" href="/index.html">â† Retour Ã  l'app</a>
                <button id="theme-toggle-btn" class="btn-icon-round" aria-label="Basculer thÃ¨me sombre" title="ThÃ¨me sombre" aria-pressed="false">
                    <span id="theme-toggle-icon">ğŸŒ™</span>
                </button>
            </nav>
        </div>
    </header>

    <main class="about-main">
        <section class="about-grid">
            <article class="about-card reveal" data-reveal>
                <header>
                    <p class="section-label">Peribus et vous</p>
                    <h1>Deux promesses simples pour vos trajets pÃ©riurbains.</h1>
                </header>
                <div class="about-meta-grid compact">
                    <div>
                        <h3>DonnÃ©es ouvertes, usage clair</h3>
                        <p>Horaires GTFS Perpignan MÃ©diterranÃ©e + Google Routes, le tout sous licence ODbL, sans lien officiel avec lâ€™exploitant.</p>
                    </div>
                    <div>
                        <h3>Respect et sobriÃ©tÃ©</h3>
                        <p>Aucune collecte personnelle, design mobile-first, notifications limitÃ©es aux pÃ©riodes sensibles (vacances, dessertes rÃ©duites).</p>
                    </div>
                </div>
                <div class="about-meta-grid compact">
                    <div>
                        <h3>Mise Ã  jour continue</h3>
                        <p>Synchronisation rÃ©currente des fichiers dâ€™horaires pour minimiser les Ã©carts et corriger les trajets.</p>
                    </div>
                    <div>
                        <h3>Contact direct</h3>
                        <p><a href="mailto:contact@peribus.fr">contact@peribus.fr</a> pour vos retours ou suggestions.</p>
                    </div>
                </div>
            </article>

            <article class="about-card install-card reveal" data-reveal>
                <div class="install-heading">
                    <p class="section-label">Installer Peribus</p>
                    <h2>Ajoutez lâ€™app en 15 secondes.</h2>
                    <p>Ni store, ni compte. Juste votre Ã©cran dâ€™accueil.</p>
                </div>
                <ul class="install-steps">
                    <li><span>1</span><p>Desktop : cliquez sur Â« Installer Â» dans la barre dâ€™URL.</p></li>
                    <li><span>2</span><p>Android : Chrome â†’ menu â‹® â†’ Â« Ajouter Ã  lâ€™Ã©cran dâ€™accueil Â».</p></li>
                    <li><span>3</span><p>iOS : Safari â†’ Bouton Partager â†’ Â« Ã‰cran dâ€™accueil Â».</p></li>
                </ul>
                <button class="install-btn" type="button" data-install-button>Installer maintenant</button>
                <p class="install-helper" data-install-helper></p>
                <p class="legal-text">Fonctionne hors ligne aprÃ¨s installation. Toujours zÃ©ro donnÃ©e personnelle.</p>
            </article>
        </section>
    </main>

    <footer id="legal-strip">
        <div class="legal-strip-content">
            <span class="legal-pill">Application indÃ©pendante, non affiliÃ©e au Grand PÃ©rigueux.</span>
            <span>DonnÃ©es Â© Grand PÃ©rigueux / PÃ©ribus â€” licence ODbL.</span>
            <span>
                Base dÃ©rivÃ©e <code>gtfs.bundle.json</code> partagÃ©e sur
                <a href="https://github.com/EFFEZFEZ/p-rimap-sans-api-/tree/main/public/data/gtfs" target="_blank" rel="noopener">GitHub</a>.
            </span>
            <a class="legal-about-btn" href="/about.html">Ã€ propos</a>
        </div>
    </footer>

    <script>
    (function themeSetup() {
        const body = document.body;
        const toggle = document.getElementById('theme-toggle-btn');
        if (!toggle) return;
        const icon = document.getElementById('theme-toggle-icon');
        const applyTheme = (isDark) => {
            body.classList.toggle('dark-theme', isDark);
            toggle.setAttribute('aria-pressed', String(isDark));
            if (icon) icon.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
        };
        let saved = null;
        try { saved = localStorage.getItem('ui-theme'); } catch (_) {}
        const prefers = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        applyTheme(saved ? saved === 'dark' : prefers);
        toggle.addEventListener('click', () => {
            const next = !body.classList.contains('dark-theme');
            applyTheme(next);
            try { localStorage.setItem('ui-theme', next ? 'dark' : 'light'); } catch (_) {}
        });
    })();

    (function installCTA() {
        const installBtn = document.querySelector('[data-install-button]');
        if (!installBtn) return;
        const helper = document.querySelector('[data-install-helper]');
        const ua = navigator.userAgent.toLowerCase();
        const isIOS = /iphone|ipad|ipod/.test(ua);
        const isAndroid = !isIOS && ua.includes('android');
        let deferredPrompt = null;

        const setHelper = (text) => { if (helper) helper.textContent = text; };

        if (isAndroid) {
            setHelper('Android dÃ©tectÃ© : utilisez le menu â‹® si le bouton nâ€™apparaÃ®t pas.');
        } else if (!isIOS) {
            setHelper('Chrome / Edge : utilisez le bouton Installer ou la barre dâ€™URL.');
        }

        if (isIOS) {
            installBtn.disabled = false;
            installBtn.textContent = 'Guide iOS';
            setHelper('iOS : Safari â†’ Partager â†’ Sur lâ€™Ã©cran dâ€™accueil.');
            installBtn.addEventListener('click', () => {
                alert('Sur iOS : ouvrez Safari â–¸ Partager â–¸ Sur lâ€™Ã©cran dâ€™accueil.');
            });
            return;
        }

        window.addEventListener('beforeinstallprompt', (event) => {
            event.preventDefault();
            deferredPrompt = event;
            installBtn.disabled = false;
            installBtn.textContent = 'Installer PÃ©riMap';
            setHelper(isAndroid ? 'Android : appuyez sur Installer ou menu â‹®.' : 'Chrome / Edge : appuyez sur Installer.');
        });

        installBtn.addEventListener('click', async () => {
            if (!deferredPrompt) {
                setHelper('Installation non disponible sur ce navigateur.');
                return;
            }
            installBtn.disabled = true;
            installBtn.textContent = 'Demande envoyÃ©eâ€¦';
            deferredPrompt.prompt();
            const choice = await deferredPrompt.userChoice;
            setHelper(choice.outcome === 'accepted' ? 'Installation en cours sur votre Ã©cran dâ€™accueil.' : 'Installation annulÃ©e.');
            deferredPrompt = null;
        });
    })();

    (function revealCards() {
        const cards = document.querySelectorAll('[data-reveal]');
        if (!cards.length || !('IntersectionObserver' in window)) {
            cards.forEach((card) => card.classList.add('is-visible'));
            return;
        }
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.25 });
        cards.forEach((card) => observer.observe(card));
    })();
    </script>
</body>
</html>
