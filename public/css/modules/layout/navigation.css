/**
 * Navigation Styles - Perimap v504
 *
 * Extracted from public/style.css section 8 (Bottom navigation).
 * No rule changes; order preserved.
 * Source: public/style.css lines 1031-1146
 * Updated: 2026-01-24
 */

/* =========================================
 * Bottom navigation (mobile)
 * ========================================= */
:root {
    --bottom-nav-height: 66px;
}

.bottom-nav {
    display: none;
}

@media (max-width: 768px) {

    #app-view-root, .main-container, body {
        padding-bottom: calc(var(--bottom-nav-height) + env(safe-area-inset-bottom, 0px));
        overscroll-behavior: none;
    }

    body.itinerary-view-active #app-view-root {
        padding-bottom: 0 !important;
        background: #111b2b !important;
    }

    /* V612: Horaires et Trafic views - padding-bottom minimal */
    body.horaires-view-active,
    body.trafic-view-active {
        padding-bottom: env(safe-area-inset-bottom, 0px) !important;
    }

    body.horaires-view-active #app-view-root,
    body.horaires-view-active .main-container,
    body.trafic-view-active #app-view-root,
    body.trafic-view-active .main-container {
        padding-bottom: env(safe-area-inset-bottom, 0px) !important;
    }

    .bottom-nav {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        position: fixed;
        left: 0; /* V366: Coll├® au bord gauche */
        right: 0; /* V366: Coll├® au bord droit */
        bottom: 0; /* V366: Coll├® en bas, stable et pr├®visible */
        height: var(--bottom-nav-height);
        padding: 0;
        padding-bottom: env(safe-area-inset-bottom); /* V366: Safe area g├®r├®e en padding interne */
        border-radius: 0; /* V366: Pas de coins arrondis, style IDFM/Google Maps */
        background: rgba(255, 255, 255, 0.98); /* V366: Plus opaque pour stabilit├® visuelle */
        border-top: 1px solid rgba(15, 23, 42, 0.12); /* V366: Bordure top uniquement */
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.08); /* V366: Shadow vers le haut */
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        z-index: 15000;
        overflow: hidden;
        gap: 0;
        will-change: transform;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        /* V491: Emp├¬che le scroll quand on touche la barre de navigation */
        touch-action: pan-y;
        overscroll-behavior: contain;
    }

    body.dark-theme .bottom-nav {
        background: rgba(15, 23, 42, 0.95);
        border-top-color: rgba(255, 255, 255, 0.1);
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.4);
    }

    .bottom-nav-item {
        appearance: none;
        -webkit-appearance: none;
        border: none;
        background: transparent;
        color: var(--text-secondary);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 4px;
        padding: 10px 6px;
        margin: 0;
        cursor: pointer;
        min-width: 0;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
    }

    .bottom-nav-icon {
        width: 20px;
        height: 20px;
    }

    .bottom-nav-label {
        font-size: 10px;
        letter-spacing: 0.02em;
        font-weight: 700;
        text-transform: uppercase;
        opacity: 0.9;
        white-space: nowrap;
    }

    .bottom-nav-item.is-active {
        color: var(--primary);
        background: rgba(34, 197, 94, 0.10);
    }

    .bottom-nav-item--primary {
        color: #0f172a;
    }

    body.dark-theme .bottom-nav-item--primary {
        color: #e2e8f0;
    }

    .bottom-nav-item--primary.is-active {
        background: linear-gradient(135deg, rgba(34, 197, 94, 0.22), rgba(0, 200, 255, 0.12));
    }

    /* Hide nav when an overlay sheet is open */
    body.detail-view-open .bottom-nav {
        transform: translate3d(0, 120%, 0);
        transition: transform 220ms ease;
    }
}

body.dark-theme #results-map,
body.dark-theme #detail-map {
    background: #050c15;
}
